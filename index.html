<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Magius - Sistema de Checklist de Inspe√ß√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS externo -->
  <link rel="stylesheet" href="style.css">

  <!-- Chart.js para gr√°ficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <div class="logo-icon">M</div>
        <div class="logo-text">
          <div class="logo-main">MAGIUS</div>
          <div class="logo-sub">Checklist</div>
        </div>
      </div>

      <nav class="sidebar-menu">
        <button class="sidebar-item active" data-screen="checklist" onclick="selectSidebar('checklist')">
          <span class="sidebar-icon">‚úÖ</span><span class="sidebar-label">Checklist</span>
        </button>
        <button class="sidebar-item" data-screen="inspectors" onclick="selectSidebar('inspectors')">
          <span class="sidebar-icon">üë§</span><span class="sidebar-label">Inspetores</span>
        </button>
        <button class="sidebar-item" data-screen="pieces" onclick="selectSidebar('pieces')">
          <span class="sidebar-icon">üß©</span><span class="sidebar-label">Pe√ßas & Itens</span>
        </button>
        <button class="sidebar-item" data-screen="dashboard" onclick="selectSidebar('dashboard')">
          <span class="sidebar-icon">üìä</span><span class="sidebar-label">Dashboard</span>
        </button>
        <button class="sidebar-item" data-screen="reports" onclick="selectSidebar('reports')">
          <span class="sidebar-icon">üìë</span><span class="sidebar-label">Relat√≥rios</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        Ajudando a construir,<br>
        cultivar, transportar e<br>
        seguir em frente.
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="top-header">
        <div class="header-left">
          <div class="header-circles">
            <span></span><span></span><span></span><span></span>
          </div>
          <div class="header-tagline">
            AJUDANDO A CONSTRUIR, CULTIVAR,<br>TRANSPORTAR E SEGUIR EM FRENTE
          </div>
        </div>
        <div class="header-brand">
          <div class="header-logo">MAGIUS</div>
          <div class="header-sub">METAL√öRGICA INDUSTRIAL</div>
        </div>
      </header>

      <div class="main-content">

        <!-- TELA: CHECKLIST -->
        <section id="checklist" class="screen active">
          <div class="card">
            <h2 class="screen-title">Checklist de Inspe√ß√£o</h2>
            <div class="grid-2">
              <div class="form-group">
                <label for="insp-selector">Inspetor</label>
                <select id="insp-selector">
                  <option value="" disabled selected>Selecionar inspetor</option>
                </select>
              </div>
              <div class="form-group">
                <label for="piece-selector">Pe√ßa</label>
                <select id="piece-selector">
                  <option value="" disabled selected>Selecionar pe√ßa</option>
                </select>
              </div>
            </div>
            <button class="btn-primary mt-8" id="btn-start-checklist">Iniciar Checklist</button>
          </div>

          <div id="checklist-execution" class="card mt-16 hide">
            <div class="checklist-piece-header">
              <div>
                <div class="checklist-piece-code" id="cl-piece-code"></div>
                <div class="checklist-piece-desc" id="cl-piece-desc"></div>
              </div>
            </div>
            <div id="cl-piece-image-box" class="piece-image-box">[Imagem da pe√ßa]</div>
            <div id="checklist-item-list"></div>
            <button class="btn-primary mt-16" id="btn-finish-checklist">Finalizar inspe√ß√£o</button>
            <div id="checklist-nok-library" class="checklist-nok-library mt-16"></div>
          </div>
        </section>

        <!-- TELA: INSPETORES -->
        <section id="inspectors" class="screen">
          <div class="card">
            <h2 class="screen-title">Cadastro de Inspetores</h2>
            <div class="grid-2">
              <div class="form-group">
                <label for="insp-name-input">Nome do inspetor</label>
                <input type="text" id="insp-name-input" placeholder="Ex: Jo√£o Silva">
              </div>
              <div class="form-group">
                <label for="insp-photo-input">Foto do inspetor</label>
                <input type="file" id="insp-photo-input" accept="image/*">
              </div>
            </div>
            <button class="btn-primary" id="btn-add-inspector">Adicionar inspetor</button>
          </div>

          <div class="card mt-16">
            <h3 class="card-title">Inspetores cadastrados</h3>
            <div id="inspectors-list" class="inspectors-grid"></div>
          </div>
        </section>

        <!-- TELA: PE√áAS & ITENS -->
        <section id="pieces" class="screen">
          <div class="card">
            <h2 class="screen-title">Cadastro de Pe√ßas</h2>
            <div class="grid-3">
              <div class="form-group">
                <label for="piece-code-input">C√≥digo da pe√ßa</label>
                <input type="text" id="piece-code-input" placeholder="597-2445#01">
              </div>
              <div class="form-group">
                <label for="piece-desc-input">Descri√ß√£o</label>
                <input type="text" id="piece-desc-input" placeholder="Longarina">
              </div>
              <div class="form-group">
                <label for="piece-image-input">Imagem da pe√ßa</label>
                <input type="file" id="piece-image-input" accept="image/*">
              </div>
            </div>
            <button class="btn-primary" id="btn-add-piece">Adicionar pe√ßa</button>
          </div>

          <div class="grid-2 mt-16">
            <div class="card">
              <h3 class="card-title">Pe√ßas cadastradas</h3>
              <div id="pieces-list" class="pieces-list"></div>
            </div>
            <div class="card">
              <h3 class="card-title">Itens de checklist da pe√ßa</h3>
              <div class="form-group">
                <label for="piece-items-selector">Selecionar pe√ßa</label>
                <select id="piece-items-selector"></select>
              </div>
              <div id="piece-items-list"></div>
              <div class="divider mt-8 mb-8"></div>
              <div class="form-group">
                <label for="item-name-input">Novo item</label>
                <input type="text" id="item-name-input" placeholder="Ex: Dimens√£o A (√ò)">
              </div>
              <div class="form-group">
                <label for="item-desc-input">Descri√ß√£o do item</label>
                <textarea id="item-desc-input" rows="2" placeholder="Descreva o que deve ser verificado"></textarea>
              </div>
              <div class="form-group">
                <label for="item-image-input">Imagem do item</label>
                <input type="file" id="item-image-input" accept="image/*">
              </div>
              <button class="btn-primary" id="btn-add-item">Adicionar item</button>
            </div>
          </div>
        </section>

        <!-- TELA: DASHBOARD -->
        <section id="dashboard" class="screen">
          <div class="card">
            <h2 class="screen-title">Dashboard ‚Äì KPIs de Inspe√ß√£o</h2>
            <div class="kpi-grid">
              <div class="kpi-card">
                <div class="kpi-label">Inspe√ß√µes no m√™s</div>
                <div class="kpi-value" id="kpi-inspecoes-mes">0</div>
              </div>
              <div class="kpi-card">
                <div class="kpi-label">% Itens N√ÉO OK</div>
                <div class="kpi-value" id="kpi-percent-nok">0%</div>
              </div>
              <div class="kpi-card kpi-large">
                <div class="kpi-label">Pe√ßas com mais reprova√ß√µes</div>
                <div class="kpi-list" id="kpi-top-pecas"></div>
              </div>
            </div>
          </div>

          <div class="card mt-16">
            <h3 class="card-title">Distribui√ß√£o de status (OK x Retrabalho)</h3>
            <div class="chart-wrapper">
              <canvas id="dashboard-chart" width="200" height="200"></canvas>
            </div>
          </div>
        </section>

        <!-- TELA: RELAT√ìRIOS -->
        <section id="reports" class="screen">
          <div class="card">
            <h2 class="screen-title">Relat√≥rios</h2>
            <div class="report-controls">
              <button class="btn-secondary" id="btn-export-csv">Exportar CSV</button>
              <div class="form-group small">
                <label for="report-month-select">M√™s:</label>
                <select id="report-month-select"></select>
              </div>
              <div class="report-total">
                Total inspe√ß√µes: <span id="total-inspecoes">0</span>
              </div>
            </div>
            <div class="chart-wrapper">
              <canvas id="reports-chart" width="200" height="200"></canvas>
            </div>
          </div>

          <div class="card mt-16">
            <h3 class="card-title">Hist√≥rico de inspe√ß√µes</h3>
            <table class="history-table">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Inspetor</th>
                  <th>Pe√ßa</th>
                  <th>Descri√ß√£o</th>
                </tr>
              </thead>
              <tbody id="reports-history-body"></tbody>
            </table>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- MODAL -->
  <div id="modal-overlay" class="modal-overlay" style="display:none;">
    <div id="modal-box" class="modal-box"></div>
  </div>

  <!-- SCRIPTS -->
  <script type="module" src="firebase.js"></script>
  <script src="app.js"></script>
</body>
</html>
